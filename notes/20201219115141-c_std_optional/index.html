<!DOCTYPE html>
<html lang="en-us">
<title>C&#43;&#43;: std::optional | Super blog</title>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.80.0" />
<meta name="description" content="my blog">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://vincent-p.github.io/css/minimal.css">
<link rel="stylesheet" href="https://vincent-p.github.io/css/syntax.css">
<link rel="stylesheet" href="https://vincent-p.github.io/css/custom.css">
<link rel="canonical" href="https://vincent-p.github.io/notes/20201219115141-c_std_optional/">
<link rel="alternate" type="application/rss+xml" href="" title="Super blog">
<script>
  MathJax = {
      tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          processEnvironments: true
      }
  };
</script>
<script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>


<header>
  
    <a href="https://vincent-p.github.io/">Super blog</a>
  
  
    <nav>
    
      <a href="/notes/">Notes</a>
    
    </nav>
  
</header>


<script>
  MathJax = {
      tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          processEnvironments: true
      }
  };
</script>
<script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>



<article>
  <header>
    <h1>C&#43;&#43;: std::optional</h1>
    
  </header>
  <dl>
<dt>tags</dt>
<dd><a href="/notes/20201218231726-cpp/">cpp</a></dd>
</dl>
<p>Basically a ripoff of Rust&rsquo;s <code>std::option</code>.</p>
<p>One thing to keep in mind when using <code>std::optional</code> is that it doesn&rsquo;t have the same semantics as pointers, this code is perfectly fine:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">auto</span> <span class="n">garbage</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">nullopt</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">even_more_garbage</span> <span class="o">=</span> <span class="o">*</span><span class="n">garbage</span><span class="p">;</span>
</code></pre></div><p>It doesn&rsquo;t throw any exception and will silently fails.
The equivalent to Rust&rsquo;s <code>unwrap()</code> is <code>value()</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">auto</span> <span class="n">garbage</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">nullopt</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">not_garbage</span> <span class="o">=</span> <span class="n">garbage</span><span class="p">.</span><span class="n">value</span><span class="p">();</span> <span class="c1">// &lt;-- Will throw a std::bad_optional_access exception!
</span></code></pre></div>
</article>



</html>
